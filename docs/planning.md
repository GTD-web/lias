# 📋 결재 시스템 기획서

## 📖 목차

1. [프로젝트 개요](#1-프로젝트-개요)
2. [핵심 기능](#2-핵심-기능)
3. [결재라인 역할 정의](#3-결재라인-역할-정의)
4. [사용자 인터페이스](#4-사용자-인터페이스)
5. [기술 아키텍처](#5-기술-아키텍처)
6. [보안 및 권한 관리](#6-보안-및-권한-관리)
7. [사용자 시나리오](#7-사용자-시나리오)
8. [향후 고도화 방안](#8-향후-고도화-방안)

---

## 1. 프로젝트 개요

### 1.1 목적

회사 내부의 문서 승인 절차를 디지털화하여 결재 효율성을 높이고, 유연한 결재라인과 역할 기반 협업 체계를 통해 조직 내 결재 문서 흐름을 표준화합니다.

### 1.2 주요 특징

- ✅ **유연한 결재 라인 지정 및 저장 기능**
- ✅ **결재 문서 자동 결재라인 생성 기능**
- ✅ **문서 종류 관리자 지정 기능**
- ✅ **결재라인 내 역할 기반 업무 흐름 정의**
- ✅ **결재 현황 시각화 및 알림 기능**

---

## 2. 핵심 기능

### 2.1 유연한 결재 라인 지정 및 재사용

- **직접 구성**: 사용자가 직접 결재라인을 구성하고, 개인 템플릿으로 저장
- **재사용 가능**: 저장한 결재라인은 다음 문서 작성 시 재사용 가능
- **공유 설정**: 템플릿은 개인 저장 또는 조직 단위 공유로 설정 가능
- **유연한 구성**: 결재라인은 자유롭게 순서 변경 및 구성원 추가 가능
- **병렬/직렬 결재**: 병렬/직렬 결재 설정 가능

### 2.2 문서 종류 등록 및 관리 (관리자 기능)

- **문서 종류 생성**: 관리자는 문서 종류(예: 지출결의서, 품의서, 협약서 등)를 생성
- **기본 결재라인**: 각 문서 종류별로 기본 결재라인 지정 가능
- **사용자 표시**: 사용자에게 표시되는 문서 유형은 관리자 설정 기반
- **템플릿 구성**: 템플릿 형태로 본문/항목 구성도 지정 가능

### 2.3 문서 작성 시 결재라인 자동 생성

- **자동 구성**: 문서 종류, 금액, 작성자 부서 등을 기반으로 결재라인 자동 구성
- **저장된 라인 불러오기**: 사용자 저장 결재라인 불러오기 가능
- **수정 가능**: 라인 적용 후 수정 가능 (커스터마이징 허용)
- **조건부 추가**: 조건부 결재자 자동 추가 (예: 1000만원 이상 시 본부장 포함)

---

## 3. 결재라인 역할 정의

결재라인은 단순한 순서가 아니라, 각 참여자의 역할에 따라 기능 권한이 구분됩니다.

### 3.1 역할별 정의 및 기능

| 역할       | 설명                               | 수행 가능 기능                                                                          | 제한 사항                  |
| ---------- | ---------------------------------- | --------------------------------------------------------------------------------------- | -------------------------- |
| **결재자** | 문서를 승인/반려하는 책임자        | • 결재 승인 / 반려<br>• 의견 작성<br>• 첨부파일 열람<br>• 결재 완료 시 다음 단계로 이동 | -                          |
| **협의자** | 결재 전 사전 협의자, 승인권은 없음 | • 협의 의견 작성<br>• 협의 완료 처리<br>• 첨부파일 열람                                 | ✖ 결재/반려 불가          |
| **시행자** | 결재 완료 후 실행 담당자           | • 실행 처리 버튼 활성화<br>• 실행 결과 보고<br>• 첨부파일 업로드                        | ✖ 결재/의견 작성 불가     |
| **참조자** | 알림 및 정보 공유 대상자           | • 문서 열람<br>• 알림 수신                                                              | ✖ 결재 / 협의 / 실행 불가 |

### 3.2 협의 프로세스 규칙

❗ **결재는 반드시 협의자 모두가 '협의 완료' 후에 가능하도록 설정 가능 (필수 여부 선택 가능)**

---

## 4. 사용자 인터페이스

### 4.1 결재 요청 화면

1. **문서 유형 선택** → **본문 작성** → **결재라인 선택**
2. **저장된 결재라인 불러오기** 또는 **새로 구성**
3. **구성 시 역할별 사용자 지정 가능**
4. **협의자/시행자/참조자 구분 색상 또는 아이콘 표기**

### 4.2 역할별 화면 구성

| 사용자 유형 | 화면 UI 구성                                   |
| ----------- | ---------------------------------------------- |
| **결재자**  | 결재/반려 버튼, 의견 입력란, 진행 상태 표시    |
| **협의자**  | 협의 완료 버튼, 의견 입력란, 문서 보기만 가능  |
| **시행자**  | 시행 처리 버튼, 결과 작성 영역, 파일 첨부 기능 |
| **참조자**  | 문서 읽기 전용 뷰, 알림만 수신                 |

---

## 5. 기술 아키텍처

### 5.1 기술 스택 제안

- **프론트엔드**: Next.js + TypeScript 기반 SPA
- **백엔드**: NestJS (Node.js 기반)
- **데이터베이스**: PostgreSQL (문서, 결재라인, 역할 등)
- **파일 저장소**: AWS S3 또는 사내 NAS
- **알림 시스템**: Slack 연동, 이메일, 모바일 푸시 지원

### 5.2 아키텍처 특징

- **Next.js**: SSR/SSG 지원으로 SEO 최적화 및 초기 로딩 성능 향상
- **NestJS**: TypeScript 기반의 구조화된 백엔드 프레임워크
- **모듈화**: 기능별 모듈 분리로 유지보수성 및 확장성 확보
- **API 설계**: RESTful API 또는 GraphQL을 통한 효율적인 데이터 통신

---

## 6. 보안 및 권한 관리

### 6.1 보안 기능

- **역할 기반 문서 권한 분리**
- **문서 열람 로그 및 협의/시행 처리 기록 저장**
- **결재 위조 방지를 위한 IP, 시간 로그 저장**
- **문서 다운로드/인쇄 제어 (관리자 설정 가능)**

---

## 7. 사용자 시나리오

### 7.1 전체 흐름 요약

```
[작성자]
    ↓
[협의자 A, B] —(모두 협의 완료)→
    ↓
[결재자 A → 결재자 B]
    ↓
[시행자]
    ↓
[참조자에게 전체 알림]
```

### 7.2 역할별 UX 시나리오

#### ✅ 1. 결재자 UX 시나리오

**사용 맥락**: 문서 결재 요청이 본인에게 도착했으며, 협의자들이 모두 협의 완료한 상태

**사용자 흐름**:

1. **알림 수신**
    - Slack / 이메일 / 푸시 알림으로 결재 요청 도착 알림 수신
2. **결재 문서 열람**
    - 대기 중 결재 리스트에서 해당 문서 선택
    - 문서 본문, 첨부파일 확인
    - 결재라인 시각화에서 본인 위치와 진행 상태 확인
3. **의견 작성 및 결재 처리**
    - 필요 시 결재 의견 입력
    - [결재 승인] 또는 [반려] 버튼 클릭
4. **결과 확인**
    - 결재 완료 후, 다음 결재자 또는 시행자에게 자동 전달
    - 본인의 결재 이력 확인 가능

#### ✅ 2. 협의자 UX 시나리오

**사용 맥락**: 문서가 결재되기 전, 협의자의 사전 검토 및 의견이 필요한 상태

**사용자 흐름**:

1. **알림 수신**
    - 문서 협의 요청 알림 수신
2. **문서 확인 및 의견 작성**
    - 문서 열람 (본문, 첨부파일 포함)
    - [협의 의견 작성] 영역에 검토 내용 입력
3. **협의 완료 처리**
    - [협의 완료] 버튼 클릭 → 협의 상태 완료로 변경
    - 협의자는 결재 버튼 비활성화 (단지 의견 전달용)
4. **후속 상태 확인**
    - 문서가 결재자에게 넘어갔는지, 전체 결재 상태를 확인 가능

#### ✅ 3. 시행자 UX 시나리오

**사용 맥락**: 모든 결재가 완료된 문서에 대해, 실제 실행 업무를 수행하는 사용자

**사용자 흐름**:

1. **알림 수신**
    - "시행 요청 문서" 알림 수신 (Slack, 이메일 등)
2. **문서 열람**
    - 문서 본문 및 결재자 의견 확인
    - 필요한 첨부파일 다운로드 가능
3. **시행 내용 처리**
    - 업무 수행 후 시스템 내 실행 보고
    - [시행 완료] 버튼 클릭
    - 결과 내용을 입력 또는 첨부파일 등록
4. **기록 저장 및 이력 확인**
    - 시행 결과가 문서 이력에 기록됨
    - 관련자에게 결과 알림 발송

#### ✅ 4. 참조자 UX 시나리오

**사용 맥락**: 해당 문서의 승인 및 시행 과정을 공유받아야 할 관련자

**사용자 흐름**:

1. **알림 수신**
    - 문서 생성/결재/완료 시점에 알림 수신
2. **문서 열람**
    - 시스템 또는 링크 통해 문서 열람
    - 결재 흐름 및 의견 열람 가능
3. **권한 제한**
    - 결재 / 의견 / 시행처리 기능은 모두 비활성화
    - PDF 다운로드 및 열람만 가능 (설정에 따라 제한 가능)

### 7.3 활용 예시: 지출 결의 문서 시나리오

- **작성자**: '지출 결의서' 작성, 협의자로 회계 담당자 지정
- **협의자**: 회계 담당자가 세부 검토 후 협의 완료
- **결재자**: 부서장 → 본부장 순서로 결재
- **시행자**: 총무 담당자가 실제 지출 실행 후 시행 완료 처리
- **참조자**: CFO에게 완료 알림 자동 발송

### 7.4 결재선(결재라인) 관리 시나리오

**사용 맥락**: 조직 내 결재 프로세스의 표준화 및 효율적 관리를 위해 결재선을 미리 등록/관리

**사용자 흐름**:

1. **결재선 목록 조회**
    - 기존에 등록된 결재선(결재, 합의, 시행, 참조자 포함) 목록을 확인
2. **결재선 신규 등록**
    - 결재, 합의, 시행, 참조자 역할별로 사용자 지정
    - 결재선 이름, 설명 등 메타데이터 입력
    - 결재선 저장(개인/조직 단위 선택)
3. **결재선 수정/삭제**
    - 기존 결재선의 구성원, 순서, 역할 등 변경
    - 불필요한 결재선 삭제
4. **결재선 템플릿 활용**
    - 문서 기안 시 저장된 결재선 템플릿을 불러와 적용
    - 필요시 추가/수정 가능

---

### 7.5 문서양식(템플릿) 관리 시나리오

**사용 맥락**: 다양한 문서 유형별로 표준화된 서식을 관리하고, 기안 시 선택하여 활용

**사용자 흐름**:

1. **문서양식 목록 조회**
    - 등록된 문서양식(템플릿) 목록 확인
    - 검색/필터 기능 제공
2. **문서양식 신규 등록**
    - 본문, 항목, 입력필드, 레이아웃 등 서식 설계
    - 결재선 기본값, 첨부파일 영역 등 포함
    - 미리보기 및 저장
    - 서식 생성 시 품의종류 추가
3. **문서양식 수정/삭제**
    - 기존 양식의 항목, 레이아웃, 기본 결재선 등 수정
    - 불필요한 양식 삭제
4. **문서 기안 시 양식 선택**
    - 기안 시 문서양식 목록에서 선택
    - 선택된 양식에 따라 입력폼 자동 생성
    - 결재선이 없을 경우 결재, 합의, 시행, 참조자 직접 지정
    - **서식에 연결된 품의종류 중 1개를 선택**
    - 선택된 품의종류에 따라 품의번호가 자동 생성됨
    - 제목, 본문 등 내용 입력 후 상신

---

## 📊 기대 효과

### 8.3 정량적 효과

- ✅ **결재라인의 반복 설정 없이 간편 재사용**
- ✅ **문서 종류별 결재 흐름의 표준화**
- ✅ **협업 기반의 사전 협의 프로세스 정착**
- ✅ **결재 후 시행 책임 명확화 및 추적 가능**
- ✅ **참조자 구분을 통한 투명한 정보 공유**

---

_📝 문서 버전: 1.0_  
_📅 최종 업데이트: 2025년_
