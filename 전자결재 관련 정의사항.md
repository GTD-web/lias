# 📘 전자결재 기능 동작 기준 정리(최종 정리본)

## 1) 문서 상태 정의

| 문서상태       | 설명                                                 |
| -------------- | ---------------------------------------------------- |
| **임시저장**   | 기안자가 작성 중인 상태                              |
| **결재진행중** | 상신 완료 후 결재선에 따라 결재 단계가 진행되는 중   |
| **결재완료**   | 모든 합의·결재 단계 승인 완료                        |
| **반려**       | 어느 결재자/합의자라도 반려하면 문서 전체가 반려     |
| **시행완료**   | 모든 시행자가 시행 완료                              |
| **취소**       | 기안자가 상신취소 또는 결재취소로 문서를 취소한 상태 |

## 2) 기안자 기능별 가능 조건

| 기능             | 가능 상태                                 |
| -------------- | ------------------------------------- |
| **문서작성**       | 항상 가능                                 |
| **임시저장된 문서수정** | 임시저장일 때만 가능, 문서내용, 결재선 수정 가능          |
| **문서수정**       | 결재진행중일 때 가능, 문서내용 수정 가능               |
| **문서삭제**       | 임시저장일 때만 가능                           |
| **상신**         | 임시저장 상태일 때 가능                         |
| **상신취소**       | 결재진행중이고 결재자가 아직 어떤 처리도 하지 않은 상태일 때 가능 |

## 3) 결재단계(progress state)

| 결재단계 | 설명                                          |
| -------- | --------------------------------------------- |
| **대기** | 해당 수신자의 차례가 오기 전                  |
| **승인** | 수신자가 승인/합의/시행/열람 등의 처리를 완료 |
| **반려** | 수신자가 문서를 반려                          |

## 4) 수신자 종류와 역할별 행동

| 수신자 역할 | 행동 명칭       | 설명                                  |
| ----------- | --------------- | ------------------------------------- |
| **합의자**  | 합의(승인/반려) | 모든 합의 승인 후 결재자로 이동       |
| **결재자**  | 결재(승인/반려) | 모두 승인 시 문서상태 = 결재완료      |
| **시행자**  | 시행            | 모든 시행 완료 시 문서상태 = 시행완료 |
| **참조자**  | 열람            | 시행완료 후 문서를 확인               |

## 5) 결재선(결재라인) 진행 순서

**합의 → 결재 → 시행 → 참조**

- 합의: 순차 진행, 모두 승인되어야 결재 단계로 이동
- 결재: 순차 진행, 모두 승인되어야 결재완료
- 시행: 결재완료 후 진행, 모든 시행자가 처리해야 시행완료
- 참조: 시행완료 후 열람 가능

## 6) 결재취소 조건

- 해당 수신자가 이미 승인한 상태
- 다음 단계 수신자가 아직 어떤 행동도 하지 않은 상태에서만 결재취소 가능

## 종합 기능 표

### 기안자 기능

| 기능     | 임시저장 | 결재진행중            | 결재완료 | 반려 | 시행완료 | 취소 |
| -------- | -------- | --------------------- | -------- | ---- | -------- | ---- |
| 문서작성 | O        | -                     | -        | -    | -        | -    |
| 문서수정 | O        | O                     | -        | -    | -        | -    |
| 문서삭제 | O        | -                     | -        | -    | -        | -    |
| 상신     | O        | -                     | -        | -    | -        | -    |
| 상신취소 | -        | (첫 결재 미진행 시) O | -        | -    | -        | -    |

### 수신자 기능

| 역할   | 문서상태   | 가능 기능       |
| ------ | ---------- | --------------- |
| 합의자 | 결재진행중 | 합의(승인/반려) |
| 결재자 | 결재진행중 | 결재(승인/반려) |
| 시행자 | 결재완료   | 시행            |
| 참조자 | 시행완료   | 열람            |
